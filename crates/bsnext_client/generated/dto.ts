/*
 Generated by typeshare 1.9.1
*/

export type IdentityDTO = 
	| { kind: "Both", payload: {
	name: string;
	bind_address: string;
}}
	| { kind: "Address", payload: {
	bind_address: string;
}}
	| { kind: "Named", payload: {
	name: string;
}};

export interface ServersDTO {
	identity: IdentityDTO;
	socket_addr: string;
}

export interface GetServersMessageResponse {
	servers: ServersDTO[];
}

export type ServerChange = 
	| { kind: "Stopped", payload: {
	bind_address: string;
}}
	| { kind: "Started", payload?: undefined }
	| { kind: "Patched", payload?: undefined };

export interface ServerChangeSetItem {
	identity: IdentityDTO;
	change: ServerChange;
}

export interface ServerChangeSet {
	items: ServerChangeSetItem[];
}

export interface ServersStarted {
	servers_resp: GetServersMessageResponse;
	changeset: ServerChangeSet;
}

export enum EventLevel {
	External = "BSLIVE_EXTERNAL",
}

export type ExternalEvents = 
	| { kind: "ServersStarted", payload: ServersStarted }
	| { kind: "Watching", payload: Watching }
	| { kind: "WatchingStopped", payload: StoppedWatching }
	| { kind: "FileChanged", payload: FileChanged }
	| { kind: "FilesChanged", payload: FilesChangedDTO }
	| { kind: "InputFileChanged", payload: FileChanged }
	| { kind: "InputAccepted", payload: InputAccepted }
	| { kind: "StartupFailed", payload: InputErrorDTO };

export interface ExternalEvent {
	level: EventLevel;
	fields: ExternalEvents;
}

export interface InputAccepted {
	path: string;
}

export interface FileChanged {
	path: string;
}

export interface FilesChangedDTO {
	paths: string[];
}

export interface DebounceDTO {
	kind: string;
	ms: string;
}

export interface Watching {
	paths: string[];
	debounce: DebounceDTO;
}

export interface StoppedWatching {
	paths: string[];
}

export type InputErrorDTO = 
	| { kind: "MissingInputs", payload: string }
	| { kind: "InvalidInput", payload: string }
	| { kind: "NotFound", payload: string }
	| { kind: "InputWriteError", payload: string }
	| { kind: "PathError", payload: string }
	| { kind: "PortError", payload: string }
	| { kind: "DirError", payload: string };

export type ClientEvent = 
	| { kind: "Change", payload: ChangeDTO };

export type ChangeDTO = 
	| { kind: "Fs", payload: {
	path: string;
	change_kind: ChangeKind;
}}
	| { kind: "FsMany", payload: ChangeDTO[] };

export enum ChangeKind {
	Changed = "Changed",
	Added = "Added",
	Removed = "Removed",
}

