/*
 Generated by typeshare 1.9.2
*/

export type RouteKindDTO = 
	| { kind: "Html", payload: {
	html: string;
}}
	| { kind: "Json", payload: {
	json_str: string;
}}
	| { kind: "Raw", payload: {
	raw: string;
}}
	| { kind: "Sse", payload: {
	sse: string;
}}
	| { kind: "Proxy", payload: {
	proxy: string;
}}
	| { kind: "Dir", payload: {
	dir: string;
	base?: string;
}};

export interface RouteDTO {
	path: string;
	kind: RouteKindDTO;
}

export interface ServerDesc {
	routes: RouteDTO[];
	id: string;
}

export type ServerIdentityDTO = 
	| { kind: "Both", payload: {
	name: string;
	bind_address: string;
}}
	| { kind: "Address", payload: {
	bind_address: string;
}}
	| { kind: "Named", payload: {
	name: string;
}};

export interface ServerDTO {
	id: string;
	identity: ServerIdentityDTO;
	socket_addr: string;
}

export interface GetServersMessageResponseDTO {
	servers: ServerDTO[];
}

export interface ServersChangedDTO {
	servers_resp: GetServersMessageResponseDTO;
}

export interface InputAcceptedDTO {
	path: string;
}

export interface FileChangedDTO {
	path: string;
}

export interface FilesChangedDTO {
	paths: string[];
}

export interface DebounceDTO {
	kind: string;
	ms: string;
}

export interface WatchingDTO {
	paths: string[];
	debounce: DebounceDTO;
}

export interface StoppedWatchingDTO {
	paths: string[];
}

export type ServerChange = 
	| { kind: "Stopped", payload: {
	bind_address: string;
}}
	| { kind: "Started", payload?: undefined }
	| { kind: "Patched", payload?: undefined }
	| { kind: "Errored", payload: {
	error: string;
}};

export interface ServerChangeSetItem {
	identity: ServerIdentityDTO;
	change: ServerChange;
}

export interface ServerChangeSet {
	items: ServerChangeSetItem[];
}

export enum LogLevelDTO {
	Info = "info",
	Debug = "debug",
	Trace = "trace",
	Error = "error",
}

export interface ClientConfigDTO {
	log_level: LogLevelDTO;
}

/**
 * public version of internal events
 * todo(alpha): clean this up
 */
export type InternalEventsDTO = 
	| { kind: "ServersChanged", payload: GetServersMessageResponseDTO };

export enum EventLevel {
	External = "BSLIVE_EXTERNAL",
}

export type ExternalEventsDTO = 
	| { kind: "ServersChanged", payload: ServersChangedDTO }
	| { kind: "Watching", payload: WatchingDTO }
	| { kind: "WatchingStopped", payload: StoppedWatchingDTO }
	| { kind: "FileChanged", payload: FileChangedDTO }
	| { kind: "FilesChanged", payload: FilesChangedDTO }
	| { kind: "InputFileChanged", payload: FileChangedDTO }
	| { kind: "InputAccepted", payload: InputAcceptedDTO };

export type StartupEventDTO = 
	| { kind: "Started", payload?: undefined }
	| { kind: "FailedStartup", payload: string };

export type InputErrorDTO = 
	| { kind: "MissingInputs", payload: string }
	| { kind: "InvalidInput", payload: string }
	| { kind: "NotFound", payload: string }
	| { kind: "InputWriteError", payload: string }
	| { kind: "PathError", payload: string }
	| { kind: "PortError", payload: string }
	| { kind: "DirError", payload: string }
	| { kind: "YamlError", payload: string }
	| { kind: "MarkdownError", payload: string }
	| { kind: "Io", payload: string }
	| { kind: "UnsupportedExtension", payload: string }
	| { kind: "MissingExtension", payload: string }
	| { kind: "EmptyInput", payload: string }
	| { kind: "BsLiveRules", payload: string };

export type ClientEvent = 
	| { kind: "Change", payload: ChangeDTO }
	| { kind: "WsConnection", payload: ClientConfigDTO }
	| { kind: "Config", payload: ClientConfigDTO };

export type ChangeDTO = 
	| { kind: "Fs", payload: {
	path: string;
	change_kind: ChangeKind;
}}
	| { kind: "FsMany", payload: ChangeDTO[] };

export enum ChangeKind {
	Changed = "Changed",
	Added = "Added",
	Removed = "Removed",
}

